{"mappings":"gfAAA,IAeIA,EACAC,EAhBJC,EAAAC,EAAA,SAEMC,EAAS,CAAC,WAAoB,SAAgB,aAAwB,SAAgB,YAEtFC,EAAO,CACXC,SAAUC,SAASC,cAAc,kBACjCC,YAAaF,SAASC,cAAc,cACpCE,cAAeH,SAASC,cAAc,gBACtCG,UAAWJ,SAASC,cAAc,6BAClCI,cAAeL,SAASC,cAAc,sCA6BxC,SAASK,EAAWC,GAElB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3B,IAUmBC,EAAKC,EAVlBC,GAUaF,EAVQ,IAUHC,EAVS,IAW5BE,KAAKC,MAAMD,KAAKE,UAAYJ,EAAMD,EAAM,GAAKA,IATlDM,YAAW,WACTtB,EAAAuB,OAAOC,QAAQ,GAASC,OAANb,EAAM,cACxBE,EAAQ,CAAEF,QAAOM,SACjBH,EAAO,CAAEH,QAAOM,Q,GACfA,E,IAQP,SAASQ,EAAYC,GACnB,OAAOA,EAAKC,MAAK,SAACC,EAAGC,G,OAAMD,EAAEX,KAAOY,EAAEZ,I,IAGxC,SAASa,EAAeJ,EAAMK,GAC5BV,YAAW,WACTU,EAAIC,UAAY,GAEhBN,EAAKO,KAAI,SAACC,EAAMC,GACd,IAAMC,EAAW,WAAgCZ,OAArBW,EAAQ,EAAE,aACpCX,OAD+CU,EAAKvB,MAAM,aAE3Da,OADCU,EAAKjB,KACN,cAEDc,EAAIM,mBAAmB,YAAaD,E,MAErC,I,CApDLlC,EAAKC,SAASmC,iBAAiB,SAE/B,WAEE,IAAMC,EAAWtC,EAAOgC,IAAIvB,GAoD5BR,EAAKM,UAAUwB,UAAY,GAC3B9B,EAAKO,cAAcuB,UAAY,GAC/BjC,EAAAuB,OAAOkB,QAAS,SAChBtC,EAAKK,cAAckC,YAAc,uCACHvC,EAAzBC,SAASuC,UAAW,EApDzB9B,QAAQ+B,IAAIJ,GACTK,MAAK,SAAAC,GACJC,QAAQC,MAAMtB,EAAYoB,IAGJhD,EAARgD,EAmDlB3C,EAAKK,cAAckC,YAAc,6BAAmFjB,OAAhC3B,EAAY,GAAGc,MAAM,aAA+Ba,OAApB3B,EAAY,GAAGoB,KAAK,SAClHa,EAAejC,EAAaK,EAAKM,WACjCN,EAAKC,SAASuC,UAAW,EAG3B,SAA0BM,G,IAIjBC,GAAgB,EAAhBC,GAAgB,EAAhBC,OAAgBC,EAHvB,QAAuBA,IAAnBtD,EACFA,EAAiBkD,O,IAEjB,I,IAAKK,E,gBAAA,IAAMC,EAANC,EAAgBC,MACjB1D,EAAe2D,MAAK,SAACC,EAASvB,EAAOwB,GAC/BD,EAAQ/C,QAAU2C,EAAW3C,QAC/B+C,EAAQzC,MAAQqC,EAAWrC,K,KAH9B2C,EAAoBZ,EAAWa,OAAAC,cAA/Bb,GAAAI,EAAAO,EAAgBG,QAAAC,MAAhBf,GAAgB,EAAAgB,EAAAL,EAAAP,E,UAAhBH,GAAgB,EAAhBC,EAAgBe,C,aAAhBjB,GAAgB,MAAhBW,EAAgBO,QAAhBP,EAAgBO,Q,YAAhBjB,E,MAAAC,C,EAQPL,QAAQC,MAAMtB,EAAY3B,IAC1BgC,EAAeL,EAAY3B,GAAiBI,EAAKO,c,CAnEnE2D,CAAiBvE,E,IAElBwE,OAAM,SAAAC,G,OAAWxB,QAAQyB,IAAK,kB","sources":["src/js/04-horses.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst horses = ['Бучифаль', 'Осадок', 'Волчьясыть', 'Дрысак', 'Кабысдох'];\n\nconst refs = {\n  startBtn: document.querySelector('.js-start-race'),\n  winnerField: document.querySelector('.js-winner'),\n  progressField: document.querySelector('.js-progress'),\n  tableBody: document.querySelector('.js-results-table > tbody'),\n  tableSummBody: document.querySelector('.js-summary-results-table > tbody'),\n  };\n\n \n  \n\nlet raceResults;\nlet summaryResults;\n\nrefs.startBtn.addEventListener('click', onStart);\n\nfunction onStart() {\n  // const promises = horses.map(horse =>startHorse(horse));\n  const promises = horses.map(startHorse); // сокращенная запись строки сверху\n\n  raceStarted();\n\n  Promise.all(promises)\n    .then(results => {\n      console.table(sortResults(results));\n      // console.log(`заезд окончен, победитель ${results[0].horse}!`);\n\n      raceResults = results;\n      raceFinished();\n      getSummaryResult(raceResults);\n    })\n    .catch(trouble => console.log(`we have trouble`));\n}\n\nfunction startHorse(horse) {\n  // Notify.success(`${horse} start`);\n  return new Promise((resolve, reject) => {\n    const time = getRandomTime(1000, 4000);\n\n    setTimeout(() => {\n      Notify.success(`${horse} finished`);\n      resolve({ horse, time });\n      reject({ horse, time });\n    }, time);\n  });\n}\n\nfunction getRandomTime(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction sortResults(data) {\n  return data.sort((a, b) => a.time - b.time);\n}\n\nfunction createTrMarkUp(data, tag) {\n  setTimeout(() => {\n    tag.innerHTML = '';\n\n    data.map((item, index) => {\n      const trMarkUp = `<tr><td>${index + 1}</td><td>${item.horse}</td><td>${\n        item.time\n      }</td></tr>`;\n\n      tag.insertAdjacentHTML('beforeend', trMarkUp);\n    });\n  }, 2000);\n}\n\nfunction raceStarted() {\n  refs.tableBody.innerHTML = '';\n  refs.tableSummBody.innerHTML = '';\n  Notify.failure(`START`);\n  refs.progressField.textContent = 'Заїзд почався, ставки не приймаются!';\n  refs.startBtn.disabled = true;\n}\n\nfunction raceFinished() {\n  refs.progressField.textContent = `Заїзд закінчівся, переміг ${raceResults[0].horse} з часом ${raceResults[0].time} ms. `;\n  createTrMarkUp(raceResults, refs.tableBody);\n  refs.startBtn.disabled = false;\n}\n\nfunction getSummaryResult(raceResults) {\n  if (summaryResults === undefined) {\n    summaryResults = raceResults;\n  } else {\n    for (const raceResult of raceResults) {\n        summaryResults.find((element, index, array) => {\n          if (element.horse === raceResult.horse) {\n            element.time += raceResult.time;\n          }\n        });\n      }\n  }\n  console.table(sortResults(summaryResults));\n  createTrMarkUp(sortResults(summaryResults), refs.tableSummBody);\n}\n"],"names":["$d2a43a02dc0d9f4e$var$raceResults","$d2a43a02dc0d9f4e$var$summaryResults","$h6c0i","parcelRequire","$d2a43a02dc0d9f4e$var$horses","$d2a43a02dc0d9f4e$var$refs","startBtn","document","querySelector","winnerField","progressField","tableBody","tableSummBody","$d2a43a02dc0d9f4e$var$startHorse","horse","Promise","resolve","reject","min","max","time","Math","floor","random","setTimeout","Notify","success","concat","$d2a43a02dc0d9f4e$var$sortResults","data","sort","a","b","$d2a43a02dc0d9f4e$var$createTrMarkUp","tag","innerHTML","map","item","index","trMarkUp","insertAdjacentHTML","addEventListener","promises","failure","textContent","disabled","all","then","results","console","table","raceResults1","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step1","raceResult","_step","value","find","element","array","_iterator","Symbol","iterator","next","done","_loop","err","return","$d2a43a02dc0d9f4e$var$getSummaryResult","catch","trouble","log"],"version":3,"file":"04-horses.d3ea5a1f.js.map"}