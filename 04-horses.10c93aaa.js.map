{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAS,CAAC,WAAoB,SAAgB,WAAoB,QAAc,UAEhFC,EAAO,CACXC,SAAUC,SAASC,cAAc,kBACjCC,YAAaF,SAASC,cAAc,cACpCE,cAAeH,SAASC,cAAc,gBACtCG,UAAWJ,SAASC,cAAc,6BAClCI,cAAeL,SAASC,cAAc,sCAIxC,IACIK,EACAC,EAFAC,EAAW,EAwBf,SAASC,EAAWC,GAElB,OAAO,IAAIC,SAAQ,CAACC,EAASC,KAC3B,MAAMC,GAUaC,EAVQ,IAUHC,EAVS,IAW5BC,KAAKC,MAAMD,KAAKE,UAAYH,EAAMD,EAAM,GAAKA,IADtD,IAAuBA,EAAKC,EARxBI,YAAW,KACTzB,EAAA0B,OAAOC,QAAQ,GAAGZ,cAClBE,EAAQ,C,MAAEF,E,KAAOI,IACjBD,EAAO,C,MAAEH,E,KAAOI,GAAO,GACtBA,EAAK,G,CAQZ,SAASS,EAAYC,GACnB,OAAOA,EAAKC,MAAK,CAACC,EAAGC,IAAMD,EAAEZ,KAAOa,EAAEb,M,CAGxC,SAASc,EAAeJ,EAAMK,GAC5BT,YAAW,KACTS,EAAIC,UAAY,GAEhBN,EAAKO,KAAI,CAACC,EAAMC,KACd,MAAMC,EAAW,WAAWD,EAAQ,aAAaD,EAAKtB,iBACpDsB,EAAKlB,iBAGPe,EAAIM,mBAAmB,YAAaD,EAAS,GAC7C,GACD,I,CApDLpC,EAAKC,SAASqC,iBAAiB,SAE/B,WAEE,MAAMC,EAAWxC,EAAOkC,IAAItB,GAoD5BX,EAAKM,UAAU0B,UAAY,GAC3BhC,EAAKO,cAAcyB,UAAY,GAC/BnC,EAAA0B,OAAOiB,QAAQ,SACfxC,EAAKK,cAAcoC,YAAc,uCACHzC,EAAzBC,SAASyC,UAAW,EACzBhC,GAAW,EArDXG,QAAQ8B,IAAIJ,GACTK,MAAKC,IACJC,QAAQC,MAAMtB,EAAYoB,IAGJrC,EAARqC,EAoDlB7C,EAAKK,cAAcoC,YAAc,WAAC/B,yBAAwBF,EAAwC,GAAAI,iBAAAJ,EAAgC,GAAAQ,YAC5Gc,EAAetB,EAAaR,EAAKM,WACjCN,EAAKC,SAASyC,UAAW,EAG3B,SAA0BM,GACxB,QAAuBC,IAAnBxC,EACFA,EAAiBuC,OAEjB,IAAK,MAAME,KAAcF,EACrBvC,EAAe0C,MAAK,CAACC,EAASjB,EAAOkB,KAC/BD,EAAQxC,QAAUsC,EAAWtC,QAC/BwC,EAAQpC,MAAQkC,EAAWlC,KAAI,IAKzC8B,QAAQC,MAAMtB,EAAYhB,IAC1BqB,EAAeL,EAAYhB,GAAiBT,EAAKO,c,CApEnE+C,CAAiB9C,EAAY,IAE9B+C,OAAMC,GAAWV,QAAQW,IAAI,oB","sources":["src/js/04-horses.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst horses = ['Бучіфаль', 'Вогінь', 'Крихітко', 'Кемел', 'Понько'];\n\nconst refs = {\n  startBtn: document.querySelector('.js-start-race'),\n  winnerField: document.querySelector('.js-winner'),\n  progressField: document.querySelector('.js-progress'),\n  tableBody: document.querySelector('.js-results-table > tbody'),\n  tableSummBody: document.querySelector('.js-summary-results-table > tbody'),\n  };\n  \n\nlet qtyRaces = 0;\nlet raceResults;\nlet summaryResults;\n\nrefs.startBtn.addEventListener('click', onStart);\n\nfunction onStart() {\n  // const promises = horses.map(horse =>startHorse(horse));\n  const promises = horses.map(startHorse); // сокращенная запись строки сверху\n\n  raceStarted();\n\n  Promise.all(promises)\n    .then(results => {\n      console.table(sortResults(results));\n      // console.log(`заезд окончен, победитель ${results[0].horse}!`);\n\n      raceResults = results;\n      raceFinished();\n      getSummaryResult(raceResults);\n    })\n    .catch(trouble => console.log(`we have trouble`));\n}\n\nfunction startHorse(horse) {\n  // Notify.success(`${horse} start`);\n  return new Promise((resolve, reject) => {\n    const time = getRandomTime(1000, 4000);\n\n    setTimeout(() => {\n      Notify.success(`${horse} finished`);\n      resolve({ horse, time });\n      reject({ horse, time });\n    }, time);\n  });\n}\n\nfunction getRandomTime(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction sortResults(data) {\n  return data.sort((a, b) => a.time - b.time);\n}\n\nfunction createTrMarkUp(data, tag) {\n  setTimeout(() => {\n    tag.innerHTML = '';\n\n    data.map((item, index) => {\n      const trMarkUp = `<tr><td>${index + 1}</td><td>${item.horse}</td><td>${\n        item.time\n      }</td></tr>`;\n\n      tag.insertAdjacentHTML('beforeend', trMarkUp);\n    });\n  }, 2000);\n}\n\nfunction raceStarted() {\n  refs.tableBody.innerHTML = '';\n  refs.tableSummBody.innerHTML = '';\n  Notify.failure(`START`);\n  refs.progressField.textContent = 'Заїзд почався, ставки не приймаются!';\n  refs.startBtn.disabled = true;\n  qtyRaces +=1;\n}\n\nfunction raceFinished() {\n  refs.progressField.textContent = `Заїзд N ${qtyRaces} закінчівся, переміг ${raceResults[0].horse} з часом ${raceResults[0].time} ms. `;\n  createTrMarkUp(raceResults, refs.tableBody);\n  refs.startBtn.disabled = false;\n}\n\nfunction getSummaryResult(raceResults) {\n  if (summaryResults === undefined) {\n    summaryResults = raceResults;\n  } else {\n    for (const raceResult of raceResults) {\n        summaryResults.find((element, index, array) => {\n          if (element.horse === raceResult.horse) {\n            element.time += raceResult.time;\n          }\n        });\n      }\n  }\n  console.table(sortResults(summaryResults));\n  createTrMarkUp(sortResults(summaryResults), refs.tableSummBody);\n}\n"],"names":["$iQIUW","parcelRequire","$3f4ae7b526510586$var$horses","$3f4ae7b526510586$var$refs","startBtn","document","querySelector","winnerField","progressField","tableBody","tableSummBody","$3f4ae7b526510586$var$raceResults","$3f4ae7b526510586$var$summaryResults","$3f4ae7b526510586$var$qtyRaces","$3f4ae7b526510586$var$startHorse","horse","Promise","resolve","reject","time","min","max","Math","floor","random","setTimeout","Notify","success","$3f4ae7b526510586$var$sortResults","data","sort","a","b","$3f4ae7b526510586$var$createTrMarkUp","tag","innerHTML","map","item","index","trMarkUp","insertAdjacentHTML","addEventListener","promises","failure","textContent","disabled","all","then","results","console","table","raceResults1","undefined","raceResult","find","element","array","$3f4ae7b526510586$var$getSummaryResult","catch","trouble","log"],"version":3,"file":"04-horses.10c93aaa.js.map"}