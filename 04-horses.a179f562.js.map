{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAS,CACb,WACQ,SACF,aACI,SACJ,YAGFC,EAAO,CACXC,SAAUC,SAASC,cAAc,kBACjCC,YAAaF,SAASC,cAAc,cACpCE,cAAeH,SAASC,cAAc,gBACtCG,UAAWJ,SAASC,cAAc,8BAMpC,IAAII,EAyBJ,SAASC,EAAWC,GAEhB,OAAO,IAAIC,SAAQ,CAACC,EAASC,KAC3B,MAAMC,GAUWC,EAVU,IAULC,EAVW,IAW9BC,KAAKC,MAAMD,KAAKE,UAAYH,EAAMD,EAAM,GAAKA,IADtD,IAAuBA,EAAKC,EARtBI,YAAW,KACTtB,EAAAuB,OAAOC,QAAQ,GAAGZ,cAClBE,EAAQ,C,MAAEF,E,KAAOI,IACjBD,EAAO,C,MAAEH,E,KAAOI,GAAO,GACtBA,EAAK,G,CAhCdb,EAAKC,SAASqB,iBAAiB,SAE/B,WAGA,MAAMC,EAAWxB,EAAOyB,IAAIhB,GAuDxBR,EAAKM,UAAUmB,UAAY,GAC3B5B,EAAAuB,OAAOM,QAAQ,SAChB1B,EAAKK,cAAcsB,YAAiB,uCACN3B,EAAzBC,SAAS2B,UAAW,EAtD5BlB,QAAQmB,IAAIN,GACTO,MAAKC,IA8BR,IAIwBC,EAjCpBC,QAAQC,MAAkBH,EA8BhBI,MAAK,CAACC,EAAGC,IAAMD,EAAEvB,KAAOwB,EAAExB,QA3BdN,EAARwB,EAsDd/B,EAAKK,cAAcsB,YAAc,6BAACpB,EAAkD,GAAAE,iBAAAF,EAAgC,GAAAM,YAxBhGmB,EAyBiBzB,EAvBrCY,YAAW,KACPnB,EAAKM,UAAUmB,UAAY,GAE3BO,EAAYR,KAAI,CAACc,EAAMC,KACvB,MAAMC,EAAW,WAAWD,EAAM,aAAaD,EAAK7B,iBAAiB6B,EAAKzB,iBAE1Eb,EAAKM,UAAUmC,mBAAmB,YAAaD,EAAS,GACxD,GACD,KAgBmBxC,EAAKC,SAAS2B,UAAW,CAvDjC,IAKfc,OAAMC,GAAWV,QAAQW,IAAI,oB","sources":["src/js/04-horses.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst horses = [\n  'Бучифаль',\n  'Осадок',\n  'Волчьясыть',\n  'Дрысак',\n  'Кабысдох',\n];\n\nconst refs = {\n  startBtn: document.querySelector('.js-start-race'),\n  winnerField: document.querySelector('.js-winner'),\n  progressField: document.querySelector('.js-progress'),\n  tebleBody: document.querySelector('.js-results-table > tbody'),\n};\n\n\n\n\nlet raceResults;\n\nrefs.startBtn.addEventListener('click', onStart);\n\nfunction onStart() {\n\n    // const promises = horses.map(horse =>startHorse(horse));\nconst promises = horses.map(startHorse); // сокращенная запись строки сверху\n\nraceStarted();\n\nPromise.all(promises)\n  .then(results => {\n    console.table(sortResults(results));\n    // console.log(`заезд окончен, победитель ${results[0].horse}!`);\n    \n    raceResults = results;\n    raceFinished();\n\n\n    \n  })\n  .catch(trouble => console.log(`we have trouble`));\n}\n\nfunction startHorse(horse) {\n    // Notify.success(`${horse} start`);\n    return new Promise((resolve, reject) => {\n      const time = getRandomTime(1000, 4000);\n  \n      setTimeout(() => {\n        Notify.success(`${horse} finished`);\n        resolve({ horse, time });\n        reject({ horse, time });\n      }, time);\n    });\n}\n\nfunction getRandomTime(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction sortResults(data) {\n  return data.sort((a, b) => a.time - b.time);\n}\n\nfunction createTrMarkUp(raceResults) {\n\n    setTimeout(() => {\n        refs.tebleBody.innerHTML = \"\";\n \n        raceResults.map((item, index) => {\n        const trMarkUp = `<tr><td>${index+1}</td><td>${item.horse}</td><td>${item.time}</td></tr>`;\n       \n        refs.tebleBody.insertAdjacentHTML('beforeend', trMarkUp);\n      });\n    }, 2000);\n\n \n}\n\nfunction raceStarted() {\n    refs.tebleBody.innerHTML = \"\";\n    Notify.failure(`START`);\n   refs.progressField.textContent =    'Заїзд почався, ставки не приймаются!';\n   refs.startBtn.disabled = true;\n}\n\nfunction raceFinished() {\n      \n    refs.progressField.textContent = `Заїзд закінчівся, переміг ${raceResults[0].horse} з часом ${raceResults[0].time} ms. ` ; \n    createTrMarkUp(raceResults);\n    refs.startBtn.disabled = false;\n       \n}\n\n\n"],"names":["$iQIUW","parcelRequire","$3f4ae7b526510586$var$horses","$3f4ae7b526510586$var$refs","startBtn","document","querySelector","winnerField","progressField","tebleBody","$3f4ae7b526510586$var$raceResults","$3f4ae7b526510586$var$startHorse","horse","Promise","resolve","reject","time","min","max","Math","floor","random","setTimeout","Notify","success","addEventListener","promises","map","innerHTML","failure","textContent","disabled","all","then","results","raceResults1","console","table","sort","a","b","item","index","trMarkUp","insertAdjacentHTML","catch","trouble","log"],"version":3,"file":"04-horses.a179f562.js.map"}