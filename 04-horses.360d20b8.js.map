{"mappings":"YAAA,IAeIA,EAfEC,EAAS,CACb,cACA,UACA,kBACA,aACA,cA8BF,SAASC,EAAWC,GAChB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3B,IASiBC,EAAKC,EAThBC,GASWF,EATU,IASLC,EATW,IAU9BE,KAAKC,MAAMD,KAAKE,UAAYJ,EAAMD,EAAM,GAAKA,IARhDM,YAAW,WACTR,EAAQ,CAAEF,QAAOM,SACjBH,EAAO,CAAEH,QAAOM,Q,GACfA,E,KAlCI,CACXK,SAAUC,SAASC,cAAc,kBACjCC,YAAaF,SAASC,cAAc,cACpCE,cAAeH,SAASC,cAAc,gBACtCG,UAAWJ,SAASC,cAAc,+BAK/BF,SAASM,iBAAiB,SAE/B,WAGA,IAAMC,EAAWpB,EAAOqB,IAAIpB,GAECE,QAArBmB,IAAIF,GACTG,MAAK,SAAAC,GACJC,QAAQC,MAAkBF,EAyBhBG,MAAK,SAACC,EAAGC,G,OAAMD,EAAEpB,KAAOqB,EAAErB,I,KAxBpCiB,QAAQK,IAAI,6BAAoEC,OAAjBP,EAAQ,GAAGtB,MAAM,MAC1DH,EAARyB,EACdC,QAAQK,IAAI/B,E,IAGbiC,OAAM,SAAAC,G,OAAWR,QAAQK,IAAK,mB","sources":["src/js/04-horses.js"],"sourcesContent":["const horses = [\n  'Secretariat',\n  'Eclipse',\n  'West Australian',\n  'Flying Fox',\n  'Seabiscuit',\n];\n\nconst refs = {\n  startBtn: document.querySelector('.js-start-race'),\n  winnerField: document.querySelector('.js-winner'),\n  progressField: document.querySelector('.js-progress'),\n  tebleBody: document.querySelector('.js-results-table > tbody'),\n};\n\nlet raceResults;\n\nrefs.startBtn.addEventListener('click', onStart);\n\nfunction onStart() {\n\n    // const promises = horses.map(horse =>startHorse(horse));\nconst promises = horses.map(startHorse); // сокращенная запись строки сверху\n\nPromise.all(promises)\n  .then(results => {\n    console.table(sortResults(results));\n    console.log(`заезд окончен, победитель ${results[0].horse}!`);\n    raceResults = results;\n    console.log(raceResults);\n    \n  })\n  .catch(trouble => console.log(`its some trouble`));\n}\n\nfunction startHorse(horse) {\n    return new Promise((resolve, reject) => {\n      const time = getRandomTime(1000, 3000);\n  \n      setTimeout(() => {\n        resolve({ horse, time });\n        reject({ horse, time });\n      }, time);\n    });\n}\n\nfunction getRandomTime(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction sortResults(data) {\n  return data.sort((a, b) => a.time - b.time);\n}\n\nfunction createTrMarkUp(data) {\n  data.map((index, horse, time) => {\n    const trMarkUp = `\n    <tr>\n           <th>${index}</th>\n           <th>${horse}</th>\n           <th>${time}</th>\n         </tr>\n    `;\n  });\n}\n\n// console.log(results\n//   '%c заезд начался, ставки не принимаются!',\n//   'coror: green; font-size: 14px;'\n// );\n"],"names":["$d2a43a02dc0d9f4e$var$raceResults","$d2a43a02dc0d9f4e$var$horses","$d2a43a02dc0d9f4e$var$startHorse","horse","Promise","resolve","reject","min","max","time","Math","floor","random","setTimeout","startBtn","document","querySelector","winnerField","progressField","tebleBody","addEventListener","promises","map","all","then","results","console","table","sort","a","b","log","concat","catch","trouble"],"version":3,"file":"04-horses.360d20b8.js.map"}